<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Volunteer Registration Form</title>
    <link rel="stylesheet" href="../css/style_apply.css" />
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body> 
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <div class="brand__logo" aria-hidden="true">
            <a href="index.html" class="logo">
              <img src="logo.jpg" alt="Logo Voluntariat" class="logo-img" />
            </a>
          </div>
          <span class="brand__text">HelpHub</span>
        </div>

        <nav class="nav">
          <a class="nav__link" href="index.html">Home</a>
          <a class="nav__link" href="jobs.html">Voluntariate</a>
          <a class="nav__link" href="about.html">About</a>
          <a class="nav__link" href="contact.html">Contact</a>
        </nav>

        <div class="header-cta">
          <a href="apply_now.html" class="btn btn--outline">Apply Now</a>
        </div>
      </div>
    </header>

    <div class="container">
      <div class="container header-inner"></div>
      <div class="form-wrapper">
        <h1>Volunteer Registration</h1>

        <form id="volunteerForm" novalidate>

          <div class="form-group">
            <label for="lastName">Last Name *</label>
            <input type="text" id="lastName" name="lastName" required />
          </div>

          <div class="form-group">
            <label for="firstName">First Name *</label>
            <input type="text" id="firstName" name="firstName" required />
          </div>

          <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" required />
          </div>

          <div class="form-group">
            <label for="phone">Phone *</label>
            <input type="tel" id="phone" name="phone" required />
          </div>

          <div class="form-group">
            <label for="age">Age *</label>
            <input
              type="number"
              id="age"
              name="age"
              min="16"
              max="100"
              required
            />
          </div>

          <div class="form-group">
            <label for="city">City *</label>
            <input type="text" id="city" name="city" required />
          </div>

          <div class="form-group">
            <label for="interests">Areas of Interest *</label>
            <select id="interests" name="interests" required>
              <option value="">Select...</option>
              <option value="education">Education</option>
              <option value="environment">Environment</option>
              <option value="social">Social Assistance</option>
              <option value="animals">Animal Protection</option>
              <option value="health">Health</option>
            </select>
          </div>

          <div class="form-group">
            <label for="availability">Availability *</label>
            <select id="availability" name="availability" required>
              <option value="">Select...</option>
              <option value="weekend">Weekend</option>
              <option value="weekdays">Weekdays</option>
              <option value="anytime">Anytime</option>
              <option value="occasionally">Occasionally</option>
            </select>
          </div>

          <div class="form-group">
            <label for="motivation">Why do you want to become a volunteer? *</label>
            <textarea id="motivation" name="motivation" required></textarea>
          </div>

          <button type="submit" id="submitBtn">Submit Application</button>

          <div class="success-message" id="successMessage">
            ✓ Thank you! Your application has been submitted successfully. We
            will contact you soon!
          </div>

          <div class="error-message" id="errorMessage" style="display: none; color: red; margin-top: 10px; padding: 10px; background: #ffe6e6; border-radius: 5px;">
            ✗ An error occurred. Please try again.
          </div>
        </form>
      </div>
    </div>
<script>
const form = document.getElementById("volunteerForm");
const fields = form.querySelectorAll("input, select, textarea");

// Culoare roșie când dai submit
form.addEventListener("submit", function (e) {
    let isValid = true;

    fields.forEach(field => {
        field.classList.remove("input-error");
        field.classList.remove("input-success");

        // verific dacă e gol sau invalid
        if (field.value.trim() === "" || (field.type === "email" && !validateEmail(field.value))) {
            field.classList.add("input-error");
            isValid = false;
        } else {
            field.classList.add("input-success");
        }
    });

    if (!isValid) {
        e.preventDefault(); // oprește submit-ul
    }
});

// elimină roșul după ce scrii ceva
fields.forEach(field => {
    field.addEventListener("input", () => {
        if (field.value.trim() !== "") {
            field.classList.remove("input-error");
        }
    });
});

// funcție validare email
function validateEmail(email) {
    return email.includes("@") && email.includes(".");
}
</script>


    <!-- Firebase SDK -->
    <script type="module">
      // Import Firebase
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
      import { getFirestore, collection, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

      // ============================================
      // CONFIGURARE FIREBASE - ÎNLOCUIEȘTE CU DATELE TALE!
      // ============================================
   // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
  apiKey: "AIzaSyDL7KGedj7WnoCl48AEGU3SkMOrQla6Us0",
  authDomain: "helphub-e4ec2.firebaseapp.com",
  projectId: "helphub-e4ec2",
  storageBucket: "helphub-e4ec2.firebasestorage.app",
  messagingSenderId: "387219317916",
  appId: "1:387219317916:web:2dc983eecbaff3fab83959",
  measurementId: "G-VF8QN2P4E7"
  };

      // Inițializare Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Prinde submit-ul formularului
      document.getElementById("volunteerForm").addEventListener("submit", async function (e) {
        e.preventDefault();

        // Dezactivează butonul pentru a preveni multiple submit-uri
        const submitBtn = document.getElementById("submitBtn");
        const originalText = submitBtn.textContent;
        submitBtn.disabled = true;
        submitBtn.textContent = "Submitting...";

        // Ascunde mesajele anterioare
        document.getElementById("successMessage").style.display = "none";
        document.getElementById("errorMessage").style.display = "none";

        // Colectează datele din formular
        const formData = {
          lastName: document.getElementById("lastName").value,
          firstName: document.getElementById("firstName").value,
          email: document.getElementById("email").value,
          phone: document.getElementById("phone").value,
          age: parseInt(document.getElementById("age").value),
          city: document.getElementById("city").value,
          interests: document.getElementById("interests").value,
          availability: document.getElementById("availability").value,
          motivation: document.getElementById("motivation").value,
          submittedAt: serverTimestamp(), // Timestamp automat de la server
          status: "pending" // Poți adăuga un status pentru tracking
        };

        try {
          // Salvează în Firestore în colecția "volunteers"
          const docRef = await addDoc(collection(db, "volunteers"), formData);
          
          console.log("Document saved with ID:", docRef.id);

          // Afișează mesajul de succes
          this.style.display = "none";
          document.getElementById("successMessage").style.display = "block";

          // Optional: Resetează formularul după 3 secunde
          setTimeout(() => {
            this.reset();
            this.style.display = "block";
            document.getElementById("successMessage").style.display = "none";
            submitBtn.disabled = false;
            submitBtn.textContent = originalText;
          }, 5000);

        } catch (error) {
          console.error("Error saving to Firebase:", error);
          
          // Afișează mesajul de eroare
          const errorMsg = document.getElementById("errorMessage");
          errorMsg.textContent = "✗ Error: " + error.message;
          errorMsg.style.display = "block";

          // Reactivează butonul
          submitBtn.disabled = false;
          submitBtn.textContent = originalText;
        }
      });
    </script>
  </body>
</html>